(this.webpackJsonpcovidwarehouse=this.webpackJsonpcovidwarehouse||[]).push([[0],{38:function(e,t,a){e.exports=a(71)},43:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/loading.641bf49c.svg"},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),l=a.n(c),s=a(3),o=a(2),i=(a(43),a(13)),u=function(e){var t=e.children,a=e.className,n=e.action,c=e.type,l=e.onClick,s=e.disabled;return r.a.createElement("button",{className:a,action:n,type:c,onClick:l,disabled:s},t)},m=a(1),f=a(9),p=a.n(f),d=function(){var e=Object(m.e)(),t=r.a.useContext(C).dispatch,a=r.a.useState({email:"",password:"",isSubmitting:!1,errorMessage:null}),n=Object(s.a)(a,2),c=n[0],l=n[1],f=function(e){l(Object(o.a)(Object(o.a)({},c),{},Object(i.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"card"},r.a.createElement("form",{className:"form-default",onSubmit:function(a){a.preventDefault(),l(Object(o.a)(Object(o.a)({},c),{},{isSubmitting:!0,errorMessage:null})),p.a.post("http://10.4.20.197/api/authenticate",{email:c.email,password:c.password}).then((function(a){t({type:"LOGIN",payload:a.data}),e.push("/")})).catch((function(e){console.log(e.response),l(Object(o.a)(Object(o.a)({},c),{},{isSubmitting:!1,errorMessage:e.message||e.statusText}))}))}},"LOGIN",r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"text",value:c.email,onChange:f,name:"email"}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",value:c.password,onChange:f,name:"password"}),c.errorMessage&&r.a.createElement("span",{className:"form-error"},c.errorMessage),r.a.createElement(u,{className:"btn btn-default",disabled:c.isSubmitting},c.isSubmitting?"Processing":"Login"),r.a.createElement("a",{className:"link link-default",href:"/register"},"New User?"))))},b=function(){var e=Object(m.e)(),t=r.a.useContext(C).dispatch,a=r.a.useState({name:"",email:"",password:"",isSubmitting:!1,errorMessage:null}),n=Object(s.a)(a,2),c=n[0],l=n[1],f=function(e){l(Object(o.a)(Object(o.a)({},c),{},Object(i.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"card"},r.a.createElement("form",{className:"form-default",onSubmit:function(a){a.preventDefault(),l(Object(o.a)(Object(o.a)({},c),{},{isSubmitting:!0,errorMessage:null})),p.a.post("http://10.4.20.197/api/register",{name:c.name,email:c.email,password:c.password}).then((function(a){t({type:"REGISTER",payload:a.data}),e.push("/")})).catch((function(e){console.log(e.response),l(Object(o.a)(Object(o.a)({},c),{},{isSubmitting:!1,errorMessage:e.message||e.statusText}))}))}},"REGISTER",r.a.createElement("label",{htmlFor:"email"},"Name"),r.a.createElement("input",{type:"text",value:c.name,onChange:f,name:"name"}),r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"text",value:c.email,onChange:f,name:"email"}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",value:c.password,onChange:f,name:"password"}),c.errorMessage&&r.a.createElement("span",{className:"form-error"},c.errorMessage),r.a.createElement(u,{className:"btn btn-default",disabled:c.isSubmitting},c.isSubmitting?"Processing":"Register"),r.a.createElement("a",{className:"link link-default",href:"/login"},"Already a user?"))))},h=a(12),E=a.n(h),g=a(18),v=a(17),O=a(19),N=function(e){var t=e.listToBeSearched,a=e.text,c=e.setItems,l=e.clear,o=e.itemsSelected,i=Object(n.useState)([]),u=Object(s.a)(i,2),m=u[0],f=u[1];return Object(n.useEffect)((function(){!function(){var e=[];if(""!==a){for(var n=0;n<t.length;n++){(t[n].authorName||t[n].topicName).toUpperCase().indexOf(a.toUpperCase())>-1&&e.push(t[n])}f(e)}else f(e)}()}),[a,t]),m.length>0?r.a.createElement("div",{className:"search flex flex-column"},m.map((function(e,t){return r.a.createElement("div",{className:"search-result",onClick:function(){-1===o.indexOf(e)&&c([].concat(Object(v.a)(o),[e])),l("")},key:t},e.authorName||e.topicName)}))):""},x=function(){return r.a.createElement("div",{className:"loading-indicator"},r.a.createElement("img",{className:"loader-image",src:a(70),alt:"loader"}))},j=["frequentItemset1","frequentItemset2","frequentItemset3","frequentItemset4","frequentItemset5"],S=[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],k=function(){var e=Object(O.usePromiseTracker)().promiseInProgress,t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(void 0),i=Object(s.a)(o,2),m=i[0],f=i[1],d=Object(n.useState)(void 0),b=Object(s.a)(d,2),h=b[0],k=b[1],y=Object(n.useState)(""),w=Object(s.a)(y,2),C=w[0],I=w[1],T=Object(n.useState)(""),A=Object(s.a)(T,2),G=A[0],L=A[1],M=Object(n.useState)([]),P=Object(s.a)(M,2),R=P[0],q=P[1],F=Object(n.useState)([]),U=Object(s.a)(F,2),B=U[0],J=U[1],D=Object(n.useState)([]),Y=Object(s.a)(D,2),V=Y[0],W=Y[1],z=Object(n.useState)([]),H=Object(s.a)(z,2),K=H[0],Q=H[1],X=Object(n.useState)([]),Z=Object(s.a)(X,2),$=Z[0],_=Z[1],ee=function(){var e=Object(g.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("http://10.4.20.197/api/query",{authors:R.map((function(e){return e.authorId})),topics:B.map((function(e){return e.topicId})),fromYear:m,toYear:h});case 2:t=e.sent,_(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=function(){var e=Object(g.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("http://10.4.20.197/api/getAuthors");case 2:t=e.sent,W(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(O.trackPromise)(e());var t=function(){var e=Object(g.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("http://10.4.20.197/api/getTopics");case 2:t=e.sent,Q(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(O.trackPromise)(t())}),[]),r.a.createElement("div",{className:"home"},e?r.a.createElement(x,null):r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement("div",{className:"flex flex-column filters"},r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Year "),r.a.createElement("select",{className:"select-default",onChange:function(e){f(e.target.value),k(e.target.value)}},r.a.createElement("option",{defaultValue:!0},"From"),S.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),m&&r.a.createElement("select",{className:"select-default",onChange:function(e){k(e.target.value)}},r.a.createElement("option",{defaultValue:!0},"To"),S.map((function(e,t){return m<=e?r.a.createElement("option",{key:t,onClick:function(){return f(e)}},e):""})))),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Search Authors "),r.a.createElement("input",{className:"input-default",type:"text",name:"author",onChange:function(e){return I(e.target.value)},autoComplete:"off",value:C}),r.a.createElement(N,{listToBeSearched:V,text:C,clear:I,setItems:q,itemsSelected:R})),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Authors Selected "),0===R.length?"None":r.a.createElement("div",null,"Click to deselect",R.map((function(e,t){return r.a.createElement("div",{className:"author-selections",key:t,onClick:function(){return q(R.filter((function(t){return t!==e})))}}," ",e.authorName," ")}))))),r.a.createElement("div",{className:"flex flex-column"},"RESULTS",r.a.createElement(u,{className:"btn btn-default",onClick:ee},"Show"),$.map((function(e,t){return r.a.createElement("p",{key:t},e)}))),r.a.createElement("div",{className:"flex flex-column filters"},r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Search Topics "),r.a.createElement("input",{className:"input-default",type:"text",name:"author",onChange:function(e){return L(e.target.value)},autoComplete:"off",value:G}),r.a.createElement(N,{listToBeSearched:K,text:G,clear:L,setItems:J,itemsSelected:B})),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Topics Selected "),0===B.length?"None":r.a.createElement("div",null,"Click to deselect",B.map((function(e,t){return r.a.createElement("div",{className:"author-selections",key:t,onClick:function(){return J(B.filter((function(t){return t!==e})))}}," ",e.topicName," ")})))),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Frequent Itemsets "),j.map((function(e,t){return r.a.createElement("div",{className:"flex flex-row checkbox-wrapper",key:t},r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"frequentItemsets",value:e,onChange:function(){return function(e){c&&c.indexOf(e)>-1?l(c.filter((function(t){return t!==e}))):l([].concat(Object(v.a)(c),[e]))}(e)}}),r.a.createElement("label",{htmlFor:e},e))}))))))},y=a(10),w=function(){var e=r.a.useContext(C),t=e.state,a=e.dispatch;return r.a.createElement("header",{className:"nav-header"},r.a.createElement(y.b,{className:"link link-light",to:"/"},r.a.createElement("div",{className:"brand"},r.a.createElement("span",{className:"brand-text"},"Covid Data Warehouse"))),r.a.createElement("nav",null,t.isAuthenticated&&r.a.createElement(u,{className:"btn btn-default",onClick:function(){return a({type:"LOGOUT"})}},"Log out")))},C=r.a.createContext(),I={isAuthenticated:!1,user:null,token:null},T=function(e,t){switch(t.type){case"LOGIN":case"REGISTER":return localStorage.setItem("user",JSON.stringify(t.payload.user)),localStorage.setItem("token",JSON.stringify(t.payload.token)),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!0,user:t.payload.user,token:t.payload.token});case"LOGOUT":return localStorage.clear(),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!1,user:null});default:return e}};var A=function(){var e=r.a.useReducer(T,I),t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){var e=localStorage.getItem("user")||null,t=localStorage.getItem("token")||null;n(e&&t?{type:"LOGIN",payload:{user:e,token:t}}:{type:"LOGOUT"})}),[]),r.a.createElement(C.Provider,{value:{state:a,dispatch:n}},r.a.createElement(w,null),r.a.createElement("div",{className:"App"},r.a.createElement(m.a,{exact:!0,path:"/",component:a.isAuthenticated?k:d}),r.a.createElement(m.a,{exact:!0,path:"/login",component:d}),r.a.createElement(m.a,{exact:!0,path:"/register",component:b})))};l.a.render(r.a.createElement(y.a,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.b6f168e2.chunk.js.map