(this.webpackJsonpcovidwarehouse=this.webpackJsonpcovidwarehouse||[]).push([[0],{38:function(e,t,a){e.exports=a(71)},43:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/loading.641bf49c.svg"},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),l=a.n(c),s=a(3),u=a(2),o=(a(43),a(13),function(e){var t=e.children,a=e.className,n=e.action,c=e.type,l=e.onClick,s=e.disabled;return r.a.createElement("button",{className:a,action:n,type:c,onClick:l,disabled:s},t)}),i=a(1),m=a(10),f=a.n(m),p=a(9),d=a.n(p),h=a(16),E=a(17),b=a(37),v=function(e){var t=e.listToBeSearched,a=e.text,c=e.setItems,l=e.clear,u=e.itemsSelected,o=Object(n.useState)([]),i=Object(s.a)(o,2),m=i[0],f=i[1];return Object(n.useEffect)((function(){!function(){var e=[];if(""!==a){for(var n=0;n<t.length;n++){(t[n].authorName||t[n].topicName).toUpperCase().indexOf(a.toUpperCase())>-1&&e.push(t[n])}f(e)}else f(e)}()}),[a,t]),m.length>0?r.a.createElement("div",{className:"search flex flex-column"},m.map((function(e,t){return r.a.createElement("div",{className:"search-result",onClick:function(){-1===u.indexOf(e)&&c([].concat(Object(b.a)(u),[e])),l("")},key:t},e.authorName||e.topicName)}))):""},N=function(){return r.a.createElement("div",{className:"loading-indicator"},r.a.createElement("img",{className:"loader-image",src:a(70),alt:"loader"}))},O=[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],g=function(){var e=Object(E.usePromiseTracker)().promiseInProgress,t=Object(n.useState)(void 0),a=Object(s.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(void 0),i=Object(s.a)(u,2),m=i[0],p=i[1],b=Object(n.useState)(""),g=Object(s.a)(b,2),x=g[0],k=g[1],j=Object(n.useState)(""),S=Object(s.a)(j,2),y=S[0],C=S[1],w=Object(n.useState)([]),T=Object(s.a)(w,2),I=T[0],A=T[1],P=Object(n.useState)([]),R=Object(s.a)(P,2),U=R[0],F=R[1],B=Object(n.useState)([]),V=Object(s.a)(B,2),D=V[0],J=V[1],L=Object(n.useState)([]),Y=Object(s.a)(L,2),G=Y[0],Q=Y[1],W=Object(n.useState)([]),M=Object(s.a)(W,2),_=M[0],q=M[1],z=Object(n.useState)(""),H=Object(s.a)(z,2),K=(H[0],H[1],function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("http://10.4.20.197/api/query",{authors:I.map((function(e){return e.authorId})),topics:U.map((function(e){return e.topicId})),fromYear:c,toYear:m});case 2:t=e.sent,q(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Object(E.trackPromise)(t());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://10.4.20.197/api/getAuthors");case 2:t=e.sent,J(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e());var t=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://10.4.20.197/api/getTopics");case 2:t=e.sent,Q(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(t())}),[]),r.a.createElement("div",{className:"home"},e?r.a.createElement(N,null):r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-row flex-space-between warehouse-content"},r.a.createElement("div",{className:"flex flex-column filters"},r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Year "),"From",r.a.createElement("select",{className:"select-default",onChange:function(e){l(e.target.value),p(e.target.value)},value:c},O.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),c&&r.a.createElement(r.a.Fragment,null," To",r.a.createElement("select",{className:"select-default",onChange:function(e){p(e.target.value)},value:m},O.map((function(e,t){return c<=e?r.a.createElement("option",{key:t,onClick:function(){return l(e)}},e):""}))))),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Search Authors "),r.a.createElement("input",{className:"input-default",type:"text",name:"author",onChange:function(e){return k(e.target.value)},autoComplete:"off",value:x}),r.a.createElement(v,{listToBeSearched:D,text:x,clear:k,setItems:A,itemsSelected:I})),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Selected Authors"),0===I.length?"None":r.a.createElement("div",null,"Click to deselect",I.map((function(e,t){return r.a.createElement("div",{className:"author-selections",key:t,onClick:function(){return A(I.filter((function(t){return t!==e})))}}," ",e.authorName," ")}))))),r.a.createElement("div",{className:"flex flex-column results"},r.a.createElement("div",{className:"information information-query"},r.a.createElement("b",null,"QUERY")," ",r.a.createElement("br",null),"Retrieve research papers ",r.a.createElement("br",null),I.length>0?r.a.createElement(r.a.Fragment,null,"Author names in [".concat(I.map((function(e){return e.authorName})),"]"),r.a.createElement("br",null)):"",U.length>0?r.a.createElement(r.a.Fragment,null,"Topics in [".concat(U.map((function(e){return e.topicName})),"]")," ",r.a.createElement("br",null)," "):"",c&&m?r.a.createElement(r.a.Fragment,null,"Years between [".concat(c,",  ").concat(m,"]")):""),r.a.createElement(o,{className:"btn btn-default",onClick:K},"Fetch Results"),r.a.createElement("br",null),_.length>0?"".concat(_.length," results found"):"",_.length>0?_.map((function(e,t){return r.a.createElement("div",{className:"flex flex-row flex-space-between result",key:t},r.a.createElement("span",{className:"title"}," ",e.title," "),r.a.createElement("span",null,r.a.createElement("a",{href:e.link,target:"_blank"},"PDF")),r.a.createElement("span",null,r.a.createElement("a",{href:e.abstractLink,target:"_blank"},"Abstract")))})):r.a.createElement("p",null," No papers with the current selection! ")),r.a.createElement("div",{className:"flex flex-column filters"},r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Search Topics "),r.a.createElement("input",{className:"input-default",type:"text",name:"author",onChange:function(e){return C(e.target.value)},autoComplete:"off",value:y}),r.a.createElement(v,{listToBeSearched:G,text:y,clear:C,setItems:F,itemsSelected:U})),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Selected Topics "),0===U.length?"None":r.a.createElement("div",null,"Click to deselect",U.map((function(e,t){return r.a.createElement("div",{className:"author-selections",key:t,onClick:function(){return F(U.filter((function(t){return t!==e})))}}," ",e.topicName," ")})))))),r.a.createElement("div",{className:"information"},r.a.createElement("p",null,"Built by DSAC Data Warehouse Team (",r.a.createElement("a",{href:"https://forms.office.com/Pages/ResponsePage.aspx?id=vDsaA3zPK06W7IZ1VVQKHIBWnf-SbBNOhMNj4dbQlR9UNkM0QU5STzJNUFBNTVdEVTlUV1A4UTRVMS4u",target:"_blank"},"Feedback?"),")"),r.a.createElement("p",null,"This is the alpha version covering about 1700 Covid research papers "))))},x=a(11),k=function(){var e=r.a.useContext(j),t=e.state,a=e.dispatch;return r.a.createElement("header",{className:"nav-header"},r.a.createElement(x.b,{className:"link link-light",to:"/"},r.a.createElement("div",{className:"brand"},r.a.createElement("span",{className:"brand-text"},"IIITH COVID Research Papers Data Warehouse (Version Alpha)"))),r.a.createElement("nav",null,t.isAuthenticated&&r.a.createElement(o,{className:"btn btn-default",onClick:function(){return a({type:"LOGOUT"})}},"Log out")))},j=r.a.createContext(),S={isAuthenticated:!1,user:null,token:null},y=function(e,t){switch(t.type){case"LOGIN":case"REGISTER":return localStorage.setItem("user",JSON.stringify(t.payload.user)),localStorage.setItem("token",JSON.stringify(t.payload.token)),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,user:t.payload.user,token:t.payload.token});case"LOGOUT":return localStorage.clear(),Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!1,user:null});default:return e}};var C=function(){var e=r.a.useReducer(y,S),t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.createElement(j.Provider,{value:{state:a,dispatch:n}},r.a.createElement(k,null),r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{exact:!0,path:"/",component:(a.isAuthenticated,g)})))};l.a.render(r.a.createElement(x.a,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.48380e0a.chunk.js.map