(this.webpackJsonpcovidwarehouse=this.webpackJsonpcovidwarehouse||[]).push([[0],{38:function(e,t,a){e.exports=a(71)},43:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/loading.641bf49c.svg"},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),l=a.n(c),s=a(3),o=a(2),u=(a(43),a(13),function(e){var t=e.children,a=e.className,n=e.action,c=e.type,l=e.onClick,s=e.disabled;return r.a.createElement("button",{className:a,action:n,type:c,onClick:l,disabled:s},t)}),i=a(1),m=a(10),f=a.n(m),p=a(9),d=a.n(p),h=a(16),v=a(17),E=a(37),b=function(e){var t=e.listToBeSearched,a=e.text,c=e.setItems,l=e.clear,o=e.itemsSelected,u=Object(n.useState)([]),i=Object(s.a)(u,2),m=i[0],f=i[1];return Object(n.useEffect)((function(){!function(){var e=[];if(""!==a){for(var n=0;n<t.length;n++){(t[n].authorName||t[n].topicName).toUpperCase().indexOf(a.toUpperCase())>-1&&e.push(t[n])}f(e)}else f(e)}()}),[a,t]),m.length>0?r.a.createElement("div",{className:"search flex flex-column"},m.map((function(e,t){return r.a.createElement("div",{className:"search-result",onClick:function(){-1===o.indexOf(e)&&c([].concat(Object(E.a)(o),[e])),l("")},key:t},e.authorName||e.topicName)}))):""},N=function(){return r.a.createElement("div",{className:"loading-indicator"},r.a.createElement("img",{className:"loader-image",src:a(70),alt:"loader"}))},O=[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],x=function(){var e=Object(v.usePromiseTracker)().promiseInProgress,t=Object(n.useState)(void 0),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(void 0),i=Object(s.a)(o,2),m=i[0],p=i[1],E=Object(n.useState)(""),x=Object(s.a)(E,2),j=x[0],k=x[1],g=Object(n.useState)(""),S=Object(s.a)(g,2),y=S[0],C=S[1],w=Object(n.useState)([]),T=Object(s.a)(w,2),A=T[0],I=T[1],U=Object(n.useState)([]),P=Object(s.a)(U,2),R=P[0],V=P[1],B=Object(n.useState)([]),D=Object(s.a)(B,2),J=D[0],L=D[1],Y=Object(n.useState)([]),F=Object(s.a)(Y,2),G=F[0],Q=F[1],M=Object(n.useState)([]),W=Object(s.a)(M,2),z=W[0],H=W[1],K=Object(n.useState)(""),_=Object(s.a)(K,2),q=(_[0],_[1],function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("http://10.4.20.197/api/query",{authors:A.map((function(e){return e.authorId})),topics:R.map((function(e){return e.topicId})),fromYear:c,toYear:m});case 2:t=e.sent,H(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Object(v.trackPromise)(t());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://10.4.20.197/api/getAuthors");case 2:t=e.sent,L(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(e());var t=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://10.4.20.197/api/getTopics");case 2:t=e.sent,Q(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(v.trackPromise)(t())}),[]),r.a.createElement("div",{className:"home"},e?r.a.createElement(N,null):r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-row flex-space-between warehouse-content"},r.a.createElement("div",{className:"flex flex-column filters"},r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Year "),r.a.createElement("select",{className:"select-default",onChange:function(e){l(e.target.value),p(e.target.value)}},r.a.createElement("option",{defaultValue:!0},"From"),O.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),c&&r.a.createElement("select",{className:"select-default",onChange:function(e){p(e.target.value)}},r.a.createElement("option",{defaultValue:!0},"To"),O.map((function(e,t){return c<=e?r.a.createElement("option",{key:t,onClick:function(){return l(e)}},e):""})))),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Search Authors "),r.a.createElement("input",{className:"input-default",type:"text",name:"author",onChange:function(e){return k(e.target.value)},autoComplete:"off",value:j}),r.a.createElement(b,{listToBeSearched:J,text:j,clear:k,setItems:I,itemsSelected:A})),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Authors Selected "),0===A.length?"None":r.a.createElement("div",null,"Click to deselect",A.map((function(e,t){return r.a.createElement("div",{className:"author-selections",key:t,onClick:function(){return I(A.filter((function(t){return t!==e})))}}," ",e.authorName," ")}))))),r.a.createElement("div",{className:"flex flex-column results"},"RESULTS",r.a.createElement(u,{className:"btn btn-default",onClick:q},"Fetch Results"),z.map((function(e,t){return r.a.createElement("p",{key:t}," ",r.a.createElement("a",{href:e.link,target:"_blank"},e.title))}))),r.a.createElement("div",{className:"flex flex-column filters"},r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Search Topics "),r.a.createElement("input",{className:"input-default",type:"text",name:"author",onChange:function(e){return C(e.target.value)},autoComplete:"off",value:y}),r.a.createElement(b,{listToBeSearched:G,text:y,clear:C,setItems:V,itemsSelected:R})),r.a.createElement("div",{className:"flex flex-column filter"},r.a.createElement("span",{className:"filter-header"}," Topics Selected "),0===R.length?"None":r.a.createElement("div",null,"Click to deselect",R.map((function(e,t){return r.a.createElement("div",{className:"author-selections",key:t,onClick:function(){return V(R.filter((function(t){return t!==e})))}}," ",e.topicName," ")})))))),r.a.createElement("div",{className:"information information-bold"},r.a.createElement("p",null,"QUERY: ","Select papers from database where Author in [".concat(A.map((function(e){return e.authorName})),"] AND Topic in [").concat(R.map((function(e){return e.topicName})),"] AND Year between ").concat(c||""," and ").concat(m||""))),r.a.createElement("div",{className:"information"},r.a.createElement("p",null,"Created by DSAC Datawarehouse team (",r.a.createElement("a",{href:"https://forms.office.com/Pages/ResponsePage.aspx?id=vDsaA3zPK06W7IZ1VVQKHIBWnf-SbBNOhMNj4dbQlR9UNkM0QU5STzJNUFBNTVdEVTlUV1A4UTRVMS4u",target:"_blank"},"Feedback?"),")"),r.a.createElement("p",null,"This is the alpha version covering about 1700 papers "))))},j=a(11),k=function(){var e=r.a.useContext(g),t=e.state,a=e.dispatch;return r.a.createElement("header",{className:"nav-header"},r.a.createElement(j.b,{className:"link link-light",to:"/"},r.a.createElement("div",{className:"brand"},r.a.createElement("span",{className:"brand-text"},"IIIT-H Covid Papers Warehouse (Version Alpha)"))),r.a.createElement("nav",null,t.isAuthenticated&&r.a.createElement(u,{className:"btn btn-default",onClick:function(){return a({type:"LOGOUT"})}},"Log out")))},g=r.a.createContext(),S={isAuthenticated:!1,user:null,token:null},y=function(e,t){switch(t.type){case"LOGIN":case"REGISTER":return localStorage.setItem("user",JSON.stringify(t.payload.user)),localStorage.setItem("token",JSON.stringify(t.payload.token)),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!0,user:t.payload.user,token:t.payload.token});case"LOGOUT":return localStorage.clear(),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!1,user:null});default:return e}};var C=function(){var e=r.a.useReducer(y,S),t=Object(s.a)(e,2),a=t[0],n=t[1];return r.a.createElement(g.Provider,{value:{state:a,dispatch:n}},r.a.createElement(k,null),r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{exact:!0,path:"/",component:(a.isAuthenticated,x)})))};l.a.render(r.a.createElement(j.a,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.120fd8d9.chunk.js.map