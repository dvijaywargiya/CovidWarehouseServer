(this.webpackJsonpcovidwarehouse=this.webpackJsonpcovidwarehouse||[]).push([[0],{38:function(e,t,a){e.exports=a(71)},43:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/loading.641bf49c.svg"},71:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(36),l=a.n(r),s=a(3),o=a(2),u=(a(43),a(13),function(e){var t=e.children,a=e.className,n=e.action,r=e.type,l=e.onClick,s=e.disabled;return c.a.createElement("button",{className:a,action:n,type:r,onClick:l,disabled:s},t)}),i=a(1),m=a(9),f=a.n(m),d=a(12),p=a.n(d),h=a(18),v=a(17),E=a(19),b=function(e){var t=e.listToBeSearched,a=e.text,r=e.setItems,l=e.clear,o=e.itemsSelected,u=Object(n.useState)([]),i=Object(s.a)(u,2),m=i[0],f=i[1];return Object(n.useEffect)((function(){!function(){var e=[];if(""!==a){for(var n=0;n<t.length;n++){(t[n].authorName||t[n].topicName).toUpperCase().indexOf(a.toUpperCase())>-1&&e.push(t[n])}f(e)}else f(e)}()}),[a,t]),m.length>0?c.a.createElement("div",{className:"search flex flex-column"},m.map((function(e,t){return c.a.createElement("div",{className:"search-result",onClick:function(){-1===o.indexOf(e)&&r([].concat(Object(v.a)(o),[e])),l("")},key:t},e.authorName||e.topicName)}))):""},N=function(){return c.a.createElement("div",{className:"loading-indicator"},c.a.createElement("img",{className:"loader-image",src:a(70),alt:"loader"}))},O=[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],x=function(){var e=Object(E.usePromiseTracker)().promiseInProgress,t=Object(n.useState)([]),a=Object(s.a)(t,2),r=(a[0],a[1],Object(n.useState)(void 0)),l=Object(s.a)(r,2),o=l[0],i=l[1],m=Object(n.useState)(void 0),d=Object(s.a)(m,2),v=d[0],x=d[1],j=Object(n.useState)(""),g=Object(s.a)(j,2),k=g[0],S=g[1],y=Object(n.useState)(""),C=Object(s.a)(y,2),T=C[0],w=C[1],I=Object(n.useState)([]),A=Object(s.a)(I,2),U=A[0],P=A[1],V=Object(n.useState)([]),B=Object(s.a)(V,2),R=B[0],J=B[1],L=Object(n.useState)([]),G=Object(s.a)(L,2),D=G[0],F=G[1],M=Object(n.useState)([]),Q=Object(s.a)(M,2),W=Q[0],Y=Q[1],z=Object(n.useState)([]),H=Object(s.a)(z,2),K=H[0],q=H[1],Z=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("http://10.4.20.197/api/query",{authors:U.map((function(e){return e.authorId})),topics:R.map((function(e){return e.topicId})),fromYear:o,toYear:v});case 2:t=e.sent,q(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://10.4.20.197/api/getAuthors");case 2:t=e.sent,F(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e());var t=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://10.4.20.197/api/getTopics");case 2:t=e.sent,Y(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(t())}),[]),c.a.createElement("div",{className:"home"},e?c.a.createElement(N,null):c.a.createElement("div",null,c.a.createElement("div",{className:"flex flex-row flex-space-between warehouse-content"},c.a.createElement("div",{className:"flex flex-column filters"},c.a.createElement("div",{className:"flex flex-column filter"},c.a.createElement("span",{className:"filter-header"}," Year "),c.a.createElement("select",{className:"select-default",onChange:function(e){i(e.target.value),x(e.target.value)}},c.a.createElement("option",{defaultValue:!0},"From"),O.map((function(e,t){return c.a.createElement("option",{key:t,value:e},e)}))),o&&c.a.createElement("select",{className:"select-default",onChange:function(e){x(e.target.value)}},c.a.createElement("option",{defaultValue:!0},"To"),O.map((function(e,t){return o<=e?c.a.createElement("option",{key:t,onClick:function(){return i(e)}},e):""})))),c.a.createElement("div",{className:"flex flex-column filter"},c.a.createElement("span",{className:"filter-header"}," Search Authors "),c.a.createElement("input",{className:"input-default",type:"text",name:"author",onChange:function(e){return S(e.target.value)},autoComplete:"off",value:k}),c.a.createElement(b,{listToBeSearched:D,text:k,clear:S,setItems:P,itemsSelected:U})),c.a.createElement("div",{className:"flex flex-column filter"},c.a.createElement("span",{className:"filter-header"}," Authors Selected "),0===U.length?"None":c.a.createElement("div",null,"Click to deselect",U.map((function(e,t){return c.a.createElement("div",{className:"author-selections",key:t,onClick:function(){return P(U.filter((function(t){return t!==e})))}}," ",e.authorName," ")}))))),c.a.createElement("div",{className:"flex flex-column"},"RESULTS",c.a.createElement(u,{className:"btn btn-default",onClick:Z},"Show"),K.map((function(e,t){return c.a.createElement("p",{key:t},e)}))),c.a.createElement("div",{className:"flex flex-column filters"},c.a.createElement("div",{className:"flex flex-column filter"},c.a.createElement("span",{className:"filter-header"}," Search Topics "),c.a.createElement("input",{className:"input-default",type:"text",name:"author",onChange:function(e){return w(e.target.value)},autoComplete:"off",value:T}),c.a.createElement(b,{listToBeSearched:W,text:T,clear:w,setItems:J,itemsSelected:R})),c.a.createElement("div",{className:"flex flex-column filter"},c.a.createElement("span",{className:"filter-header"}," Topics Selected "),0===R.length?"None":c.a.createElement("div",null,"Click to deselect",R.map((function(e,t){return c.a.createElement("div",{className:"author-selections",key:t,onClick:function(){return J(R.filter((function(t){return t!==e})))}}," ",e.topicName," ")})))))),c.a.createElement("div",{className:"information"},c.a.createElement("p",null,"Created by DSAC Datawarehouse team (",c.a.createElement("a",{href:"https://forms.office.com/Pages/ResponsePage.aspx?id=vDsaA3zPK06W7IZ1VVQKHIBWnf-SbBNOhMNj4dbQlR9UNkM0QU5STzJNUFBNTVdEVTlUV1A4UTRVMS4u",target:"_blank"},"Feedback?"),")"),c.a.createElement("p",null,"This is the alpha version covering about 2400 papers "))))},j=a(10),g=function(){var e=c.a.useContext(k),t=e.state,a=e.dispatch;return c.a.createElement("header",{className:"nav-header"},c.a.createElement(j.b,{className:"link link-light",to:"/"},c.a.createElement("div",{className:"brand"},c.a.createElement("span",{className:"brand-text"},"IIIT-H Covid Papers Warehouse (Version Alpha)"))),c.a.createElement("nav",null,t.isAuthenticated&&c.a.createElement(u,{className:"btn btn-default",onClick:function(){return a({type:"LOGOUT"})}},"Log out")))},k=c.a.createContext(),S={isAuthenticated:!1,user:null,token:null},y=function(e,t){switch(t.type){case"LOGIN":case"REGISTER":return localStorage.setItem("user",JSON.stringify(t.payload.user)),localStorage.setItem("token",JSON.stringify(t.payload.token)),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!0,user:t.payload.user,token:t.payload.token});case"LOGOUT":return localStorage.clear(),Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!1,user:null});default:return e}};var C=function(){var e=c.a.useReducer(y,S),t=Object(s.a)(e,2),a=t[0],n=t[1];return c.a.createElement(k.Provider,{value:{state:a,dispatch:n}},c.a.createElement(g,null),c.a.createElement("div",{className:"App"},c.a.createElement(i.a,{exact:!0,path:"/",component:(a.isAuthenticated,x)})))};l.a.render(c.a.createElement(j.a,null,c.a.createElement(C,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.84490c04.chunk.js.map